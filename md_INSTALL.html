<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ulfius: Install Ulfius</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ulfius
   </div>
   <div id="projectbrief">HTTP Framework for REST Applications in C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Install Ulfius </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><a href="#distribution-packages">Distribution packages</a></li>
<li><a href="#pre-compiled-packages">Pre-compiled packages</a></li>
<li><a href="#manual-install">Manual install</a><ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#cmake---multi-architecture">CMake - Multi architecture</a></li>
<li><a href="#good-ol-makefile">Good ol' Makefile</a></li>
</ul>
</li>
</ul>
<h1>Distribution packages</h1>
<p><a href="https://repology.org/metapackage/ulfius"><img src="https://repology.org/badge/vertical-allrepos/ulfius.svg" alt="Packaging status" style="pointer-events: none;" class="inline"/></a></p>
<p>Ulfius is available in multiple distributions as official package. Check out your distribution documentation to install the package automatically.</p>
<div class="fragment"><div class="line">$ # Example for Debian testing, install ulfius library with development files and uwsc</div>
<div class="line">$ sudo apt install libulfius-dev uwsc</div>
<div class="line">$ # Example for Debian testing, install uwsc only</div>
<div class="line">$ sudo apt install uwsc</div>
</div><!-- fragment --><h1>Pre-compiled packages</h1>
<p>You can install Ulfius with a pre-compiled package available in the <a href="https://github.com/babelouest/ulfius/releases/latest/">release pages</a>. <code>jansson</code>, <code>libmicrohttpd</code>, <code>gnutls</code>, <code>libcurl-gnutls</code> and <code>zlib</code> development files packages are required to install Ulfius. The packages files <code>ulfius-dev-full_*</code> contain the libraries <code>orcania</code>, <code>yder</code> and <code>ulfius</code>.</p>
<p>For example, to install Ulfius with the <code>ulfius-dev-full_2.7.0_Debian_stretch_x86_64.tar.gz</code> package downloaded on the <code>releases</code> page, you must execute the following commands:</p>
<div class="fragment"><div class="line">$ sudo apt install -y libmicrohttpd-dev libjansson-dev libcurl4-gnutls-dev libgnutls28-dev libgcrypt20-dev libsystemd-dev</div>
<div class="line">$ wget https://github.com/babelouest/ulfius/releases/download/v2.7.0/ulfius-dev-full_2.7.0_debian_buster_x86_64.tar.gz</div>
<div class="line">$ tar xf ulfius-dev-full_2.7.0_debian_buster_x86_64.tar.gz</div>
<div class="line">$ sudo dpkg -i liborcania-dev_2.1.1_Debian_stretch_x86_64.deb</div>
<div class="line">$ sudo dpkg -i libyder-dev_1.4.12_Debian_stretch_x86_64.deb</div>
<div class="line">$ sudo dpkg -i libulfius-dev_2.7.0_Debian_stretch_x86_64.deb</div>
</div><!-- fragment --><p>If there's no package available for your distribution, you can recompile it manually using <code>CMake</code> or <code>Makefile</code>.</p>
<h1>Manual install</h1>
<h2>Prerequisites</h2>
<p>Ulfius requires the following dependencies.</p>
<ul>
<li>libmicrohttpd (required), minimum 0.9.53 if you require Websockets support</li>
<li>libjansson (optional), minimum 2.4, required for json support</li>
<li>libgnutls, libgcrypt (optional), required for Websockets and https support</li>
<li>libcurl (optional), required to send http/smtp requests</li>
<li>libsystemd (optional), required for <a href="https://github.com/babelouest/yder">Yder</a> to log messages in journald</li>
<li>zlib (optional), required for Websockets support</li>
</ul>
<p>Note: the build stacks require a compiler (<code>gcc</code> or <code>clang</code>), <code>make</code>, <code>cmake</code> (if using CMake build), and <code>pkg-config</code>.</p>
<p>For example, to install all the external dependencies on Debian Stretch, run as root:</p>
<div class="fragment"><div class="line"># apt install -y libmicrohttpd-dev libjansson-dev libcurl4-gnutls-dev libgnutls28-dev libgcrypt20-dev zlib1g-dev</div>
</div><!-- fragment --><h2>Good ol' Makefile</h2>
<p>Download Orcania, Yder and Ulfius source code from GitHub, compile and install Orcania, then Yder, then compile and install Ulfius:</p>
<div class="fragment"><div class="line">$ git clone https://github.com/babelouest/orcania.git</div>
<div class="line">$ git clone https://github.com/babelouest/yder.git</div>
<div class="line">$ git clone https://github.com/babelouest/ulfius.git</div>
<div class="line">$ cd orcania/</div>
<div class="line">$ make &amp;&amp; sudo make install</div>
<div class="line">$ cd ../yder/</div>
<div class="line">$ make &amp;&amp; sudo make install</div>
<div class="line">$ cd ../ulfius/</div>
<div class="line">$ make &amp;&amp; sudo make install</div>
</div><!-- fragment --><h3>Disable Ulfius dependencies</h3>
<p>To disable libcurl functions, append the option <code>CURLFLAG=1</code> to the make command when you build Ulfius:</p>
<div class="fragment"><div class="line">$ make CURLFLAG=1</div>
</div><!-- fragment --><p>If libcurl functions are disabled, <code>libcurl4-gnutls-dev</code> is no longer mandatory for install.</p>
<p>To disable libjansson functions, append the option <code>JANSSONFLAG=1</code> to the make command when you build Ulfius and Orcania:</p>
<div class="fragment"><div class="line">$ make JANSSONFLAG=1</div>
</div><!-- fragment --><p>If libjansson functions are disabled, <code>libjansson-dev</code> is no longer mandatory for install.</p>
<p>To disable GNU TLS extensions (HTTPS client certificate support) and avoid installing libgnutls, append the option <code>GNUTLSFLAG=1</code> to the make command when you build Ulfius:</p>
<div class="fragment"><div class="line">$ make GNUTLSFLAG=1</div>
</div><!-- fragment --><p>If GNU TLS extensions are disabled, <code>libgnutls-dev</code> is no longer mandatory for install. However, this will also disable websocket support, since it depends on libgnutls.</p>
<p>To disable websocket implementation, append the option <code>WEBSOCKETFLAG=1</code> to the make command when you build Ulfius:</p>
<div class="fragment"><div class="line">$ make WEBSOCKETFLAG=1</div>
</div><!-- fragment --><p>To disable Yder library (you will no longer have log messages available!), append the option <code>YDERFLAG=1</code> to the make command when you build Ulfius:</p>
<div class="fragment"><div class="line">$ make YDERFLAG=1</div>
</div><!-- fragment --><p>To disable uwsc build, append the option <code>UWSCFLAG=1</code> to the make command when you build Ulfius:</p>
<div class="fragment"><div class="line">$ make UWSCFLAG=1</div>
</div><!-- fragment --><p>To disable two or more libraries, append options, example:</p>
<div class="fragment"><div class="line">$ make CURLFLAG=1 JANSSONFLAG=1</div>
</div><!-- fragment --><h3>Install Ulfius as a static archive</h3>
<p>Install Ulfius as a static archive, <code>libulfius.a</code>, use the make commands <code>make static*</code>:</p>
<div class="fragment"><div class="line">$ cd src</div>
<div class="line">$ make static &amp;&amp; sudo make static-install # or make DESTDIR=/tmp static-install if you want to install in `/tmp/lib`</div>
</div><!-- fragment --><h3>Enable embedded systems flags</h3>
<p>To build Ulfius on <a href="https://www.freertos.org/">FreeRTOS</a>, append the option <code>FREERTOSFLAG=1</code> to the make command when you build Ulfius:</p>
<div class="fragment"><div class="line">$ make FREERTOSFLAG=1</div>
</div><!-- fragment --><p>To build Ulfius with the <a href="https://savannah.nongnu.org/projects/lwip/">LWIP</a> library, append the option <code>LWIPFLAG=1</code> to the make command when you build Ulfius:</p>
<div class="fragment"><div class="line">$ make LWIPFLAG=1</div>
</div><!-- fragment --><p>Those two options are exclusive, you can't use them both at the same time.</p>
<h3>Installation directory</h3>
<p>By default, the shared libraries and the header files will be installed in the <code>/usr/local</code> location. To change this setting, you can modify the <code>DESTDIR</code> value in the <code>src/Makefile</code>, <code>lib/orcania/src/Makefile</code> and <code>lib/yder/src/Makefile</code> files.</p>
<div class="fragment"><div class="line">$ make DESTDIR=/tmp install # to install ulfius in /tmp/lib for example</div>
</div><!-- fragment --><p>You can install Ulfius without root permission if your user has write access to <code></code>. A <code>ldconfig</code> command is executed at the end of the install, it will probably fail if you don't have root permission, but this is harmless. If you choose to install Ulfius in another directory, you must set your environment variable <code>LD_LIBRARY_PATH</code> properly.</p>
<h3>Install uwsc</h3>
<p>uwsc is a small command-line tool to connect to websocket services. To install uwsc only, you can use the <code>Makefile</code> in the <code>uwsc/</code> directory:</p>
<div class="fragment"><div class="line">$ cd ulfius/uwsc</div>
<div class="line">$ make &amp;&amp; sudo make install</div>
</div><!-- fragment --><p>This will compile and install uwsc in <code>/usr/local/bin</code>, to install it in another directory, you can change the value of <code>DESTDIR</code>.</p>
<h2>CMake - Multi architecture</h2>
<p>You can build Ulfius library using CMake, example:</p>
<div class="fragment"><div class="line">$ mkdir build</div>
<div class="line">$ cd build</div>
<div class="line">$ cmake ..</div>
<div class="line">$ make &amp;&amp; sudo make install</div>
</div><!-- fragment --><p>The available options for CMake are:</p><ul>
<li><code>-DWITH_JANSSON=[on|off]</code> (default <code>on</code>): Build with Jansson dependency</li>
<li><code>-DWITH_CURL=[on|off]</code> (default <code>on</code>): Build with libcurl dependency</li>
<li><code>-DWITH_GNUTLS=[on|off]</code> (default <code>on</code>): Build with GNU TLS extensions (HTTPS client certificate support), requires GnuTLS library.</li>
<li><code>-DWITH_WEBSOCKET=[on|off]</code> (default <code>on</code>): Build with websocket functions, not available for Windows, requires libmicrohttpd 0.9.53 minimum.</li>
<li><code>-DWITH_JOURNALD=[on|off]</code> (default <code>on</code>): Build with journald (SystemD) support for logging</li>
<li><code>-DWITH_YDER=[on|off]</code> (default <code>on</code>): Build with Yder library for logging messages</li>
<li><code>-DBUILD_UWSC=[on|off]</code> (default <code>on</code>): Build uwsc</li>
<li><code>-DBUILD_STATIC=[on|off]</code> (default <code>off</code>): Build the static archive in addition to the shared library</li>
<li><code>-DBUILD_ULFIUS_TESTING=[on|off]</code> (default <code>off</code>): Build unit tests</li>
<li><code>-DBUILD_ULFIUS_DOCUMENTATION=[on|off]</code> (default <code>off</code>): Build the documentation, doxygen is required</li>
<li><code>-DINSTALL_HEADER=[on|off]</code> (default <code>on</code>): Install header file <code><a class="el" href="ulfius_8h.html" title="Ulfius framework.">ulfius.h</a></code></li>
<li><code>-DBUILD_RPM=[on|off]</code> (default <code>off</code>): Build RPM package when running <code>make package</code></li>
<li><code>-DCMAKE_BUILD_TYPE=[Debug|Release]</code> (default <code>Release</code>): Compile with debugging symbols or not </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
